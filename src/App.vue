<template>
  <div id="app">
    <h1 @click="handleProvide">app</h1>
    <about></about>
    <div id="main" style="width: 600px;height:400px;"></div>
    <!-- {{ $obj }} -->
    <s-table></s-table>
    <k-table></k-table>
    <FormTest></FormTest>
    <Nodetree :model="model"></Nodetree>
    <!-- <keep-alive>
      <component :is='currentComp'></component>
    </keep-alive> -->
    <!-- <button @click="changeComp">按钮</button> -->
    <div id="nav">
      <router-link to="/">Home</router-link> |
      <router-link to="/about">About</router-link>
    </div>
    <router-view />
  </div>
</template>

<script>
import STable from './components/Table/index.vue'
import Home from './views/Home'
import About from './views/About'
import FormTest from './Form/index'
import Nodetree from '@/components/Nodetree'
import KTable from './Table/index.vue'
// import about from './views/About.vue'
export default {
  name: 'App.vue',
  provide () {
    return {
      app: this.$options.methods
    }
  },
  data () {
    return {
      state: { arr: [] },
      model: {
        title: '1',
        children: [
          {
            title: '1-2',
            children: [
              {
                title: '1-2-1'
              },
              {
                title: '1-2-2'
              }
            ]
          },
          {
            title: '1-3'
          },
          {
            title: '1-4'
          }
        ]
      },
      currentComp: Home
    }
  },
  components: {
    Nodetree,
    FormTest,
    STable,
    KTable,
    About
  },
  methods: {
    changeComp () {
      if (this.currentComp.name === 'Home') {
        this.currentComp = About
      } else {
        this.currentComp = Home
      }
    },
    handleProvide () {
      console.log(this.$options)
    }
  },
  watch: {
    'state.arr' () {
      console.log('this.arr 改变了')
    }
  },
  mounted () {
    setInterval(() => {
      this.state.arr.push(this.state.arr.push(this.state.arr.length - 1))
    }, 1000)
    console.log(this.$echarts)
    var myChart = this.$echarts.init(document.getElementById('main'))
    console.log('myChart==============>', myChart)
    // 绘制图表
    var nodes = [
      {
        x: 500,
        y: 1000,
        nodeName: '应用',
        svgPath:
          'M544 552.325V800a32 32 0 0 1-32 32 31.375 31.375 0 0 1-32-32V552.325L256 423.037a32 32 0 0 1-11.525-43.512A31.363 31.363 0 0 1 288 368l224 128 222.075-128a31.363 31.363 0 0 1 43.525 11.525 31.988 31.988 0 0 1-11.525 43.513L544 551.038z m0 0,M64 256v512l448 256 448-256V256L512 0z m832 480L512 960 128 736V288L512 64l384 224z m0 0',
        symbolSize: 70
      },
      {
        x: 100,
        y: 600,
        nodeName: '模块1',
        svgPath:
          'M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z'
      },
      {
        x: 500,
        y: 600,
        nodeName: '模块2',
        svgPath:
          'M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z'
      },
      {
        x: 900,
        y: 600,
        nodeName: '模块3',
        svgPath:
          'M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z'
      },
      {
        x: 0,
        y: 300,
        nodeName: '节点1',
        svgPath:
          'M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z'
      },
      {
        x: 300,
        y: 300,
        nodeName: '节点2',
        svgPath:
          'M88  37.71392 0 68.29056 30.57152 68.28544 68.29056 0 37.68832-30.53568 68.25472-68.224 68.28544l-0.06144-0.06656z'
      },
      {
        x: 700,
        y: 300,
        nodeName: '节点3',
        svgPath: 'M887.55  25472-68.224 68.28544l-0.06144-0.06656z'
      },
      {
        x: 1000,
        y: 300,
        nodeName: '节点4',
        svgPath: 'M887.55 0.53568 68.25472-68.224 68.28544l-0.06144-0.06656z'
      }
    ]
    var charts = {
      nodes: [],
      linesData: [
        {
          coords: [
            [500, 1000],
            [500, 800]
          ]
        },
        {
          coords: [
            [500, 800],
            [100, 800],
            [100, 600]
          ]
        },
        {
          coords: [
            [500, 800],
            [500, 600]
          ]
        },
        {
          coords: [
            [500, 800],
            [900, 800],
            [900, 600]
          ]
        },
        {
          coords: [
            [100, 600],
            [0, 300]
          ]
        },
        {
          coords: [
            [100, 600],
            [300, 300]
          ]
        },
        {
          coords: [
            [900, 600],
            [700, 300]
          ]
        },
        {
          coords: [
            [900, 600],
            [1000, 300]
          ]
        }
      ]
    }
    for (var j = 0; j < nodes.length; j++) {
      const { x, y, nodeName, svgPath, symbolSize } = nodes[j]
      var node = {
        nodeName,
        value: [x, y],
        symbolSize: symbolSize || 50,
        symbol: 'path://' + svgPath,
        itemStyle: {
          color: 'orange'
        }
      }
      charts.nodes.push(node)
    }

    this.option = {
      backgroundColor: '#0B1321',
      xAxis: {
        min: 0,
        max: 1000,
        show: false,
        type: 'value'
      },
      yAxis: {
        min: 0,
        max: 1000,
        show: false,
        type: 'value'
      },
      series: [
        {
          type: 'graph',
          coordinateSystem: 'cartesian2d',
          label: {
            show: true,
            position: 'bottom',
            color: 'orange',
            formatter: function (item) {
              return item.data.nodeName
            }
          },
          data: charts.nodes
        },
        {
          type: 'lines',
          polyline: true,
          coordinateSystem: 'cartesian2d',
          lineStyle: {
            type: 'dashed',
            width: 2,
            color: '#175064',
            curveness: 0.3
          },
          effect: {
            show: true,
            trailLength: 0.1,
            symbol: 'arrow',
            color: 'orange',
            symbolSize: 8
          },
          data: charts.linesData
        }
      ]
    }
    myChart.setOption(this.option)
  }
}
</script>
<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
}

#nav {
  padding: 30px;
}

#nav a {
  font-weight: bold;
  color: #2c3e50;
}

#nav a.router-link-exact-active {
  color: #42b983;
}
</style>
